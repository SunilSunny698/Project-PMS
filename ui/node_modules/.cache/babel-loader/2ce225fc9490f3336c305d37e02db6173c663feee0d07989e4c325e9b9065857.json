{"ast":null,"code":"var _jsxFileName = \"/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/tables/EmployeeTable.tsx\",\n  _s = $RefreshSig$();\nimport { Table } from \"./Table\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport api from '../api/axiosConfig';\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const EmployeeTable = ({\n  role\n}) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [maxPages, setMaxPages] = useState(0);\n  const navigate = useNavigate();\n  const headers = {\n    Authorization: `Bearer ${localStorage.getItem(\"Jwt\")}`\n  };\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const errorParam = queryParams.get('error');\n  const fetchData = async (pageNumber = 0, pageSize = 1) => {\n    const url = `employee/all?pageNumber=${pageNumber}&pageSize=${pageSize}`;\n    console.log(\"Url\" + url);\n    await api.get(url, {\n      headers\n    }).then(response => {\n      console.log(response.data);\n      setMaxPages(response.data.totalPages - 1);\n      setData(response.data.content);\n    }).catch(() => {});\n  };\n  useEffect(() => {\n    fetchData(0, 1);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const deleteHandler = async row => {\n    await api.delete(`employee/${row.id}`, {\n      headers\n    }).then(() => {}).catch(() => {});\n    fetchData(0, 10);\n  };\n  const viewHandler = row => {\n    navigate(`${row.id}`);\n  };\n  const cols = useMemo(() => [{\n    header: 'Id',\n    cell: row => \"ETS00\" + row.renderValue(),\n    accessorKey: 'id'\n  }, {\n    header: 'Name',\n    cell: row => row.renderValue(),\n    accessorKey: 'firstName'\n  }, {\n    header: 'Email',\n    cell: row => row.renderValue(),\n    accessorKey: 'email'\n  }, {\n    header: 'Role',\n    cell: row => row.renderValue(),\n    accessorKey: 'designation'\n  }], []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      fetchHandler: fetchData,\n      maxPages: maxPages,\n      columns: cols,\n      data: data,\n      label: \"Employee\",\n      all: role === \"Employee\" ? false : true,\n      deleteHandler: deleteHandler,\n      viewHandler: viewHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), errorParam && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 inline-flex w-1/2 items-center rounded-lg bg-red-100 px-6 py-3 -mt-7 text-base text-red-700\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            fill: \"currentColor\",\n            className: \"h-5 w-5\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              \"fill-rule\": \"evenodd\",\n              d: \"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z\",\n              \"clip-rule\": \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), \"Not enought details to generate payslip\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(EmployeeTable, \"bHzFxXnCrNlu1RIINojcc3JzgvE=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = EmployeeTable;\nvar _c;\n$RefreshReg$(_c, \"EmployeeTable\");","map":{"version":3,"names":["Table","useEffect","useMemo","useState","api","useLocation","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","EmployeeTable","role","_s","data","setData","maxPages","setMaxPages","navigate","headers","Authorization","localStorage","getItem","location","queryParams","URLSearchParams","search","errorParam","get","fetchData","pageNumber","pageSize","url","console","log","then","response","totalPages","content","catch","deleteHandler","row","delete","id","viewHandler","cols","header","cell","renderValue","accessorKey","children","fetchHandler","columns","label","all","fileName","_jsxFileName","lineNumber","columnNumber","className","xmlns","viewBox","fill","d","_c","$RefreshReg$"],"sources":["/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/tables/EmployeeTable.tsx"],"sourcesContent":["import { ColumnDef } from \"@tanstack/react-table\";\nimport { Table } from \"./Table\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport api from '../api/axiosConfig'\nimport { Employee } from \"../types/pmsTypes\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { FilterForm } from \"../filter/FilterForm\";\ntype EmployeeTableProps = {\n  role:\"HR\" |\"Employee\"\n}\nexport const EmployeeTable = ({role}:EmployeeTableProps) => {\n    const [data,setData] = useState([])\n    const [maxPages, setMaxPages] = useState(0)\n    const navigate = useNavigate()\n    const headers = {          \n      Authorization:`Bearer ${localStorage.getItem(\"Jwt\")}`\n    }\n    const location = useLocation();\n    const queryParams = new URLSearchParams(location.search);\n    const errorParam = queryParams.get('error');\n\n    const fetchData = async (pageNumber:Number = 0,pageSize:Number = 1) => {\n      const url = `employee/all?pageNumber=${pageNumber}&pageSize=${pageSize}`\n      console.log(\"Url\"+url)\n      await api.get(url,{headers})\n      .then(response => {\n        console.log(response.data)\n        setMaxPages(response.data.totalPages-1)\n        setData(response.data.content)\n      })\n      .catch(() => {})\n    }\n\n    useEffect( ()=>{\n      fetchData(0,1)\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[]); \n    \n\n    const deleteHandler = async (row:any) => {\n      await api.delete(`employee/${row.id}`,{headers})\n        .then(() => {})\n        .catch(() => {})\n      fetchData(0,10)\n    }\n\n    const viewHandler = (row:any) => {\n      navigate(`${row.id}`)\n    }\n\n    const cols = useMemo<ColumnDef<Employee>[]>(\n        () => [\n          {\n            header:'Id',\n            cell: (row) => \"ETS00\"+row.renderValue(),\n            accessorKey:'id'\n          },\n          {\n            header: 'Name',\n            cell: (row) => row.renderValue(),\n            accessorKey: 'firstName',\n          },\n          {\n            header: 'Email',\n            cell: (row) => row.renderValue(),\n            accessorKey: 'email',\n          },\n          {\n           header: 'Role',\n           cell: (row) => row.renderValue(),\n           accessorKey: 'designation',\n         },\n        ],\n        []\n       );\n       \n    return (\n      <>\n        <Table fetchHandler={fetchData} maxPages={maxPages} columns={cols} data={data} label=\"Employee\" all={role===\"Employee\" ? false:true}  deleteHandler={deleteHandler} viewHandler={viewHandler}/>\n        {errorParam && \n        <div className=\"flex justify-center\">\n          <div\n          className=\"mb-3 inline-flex w-1/2 items-center rounded-lg bg-red-100 px-6 py-3 -mt-7 text-base text-red-700\"\n          role=\"alert\">\n          <span className=\"mr-2\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              fill=\"currentColor\"\n              className=\"h-5 w-5\">\n              <path\n                fill-rule=\"evenodd\"\n                d=\"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z\"\n                clip-rule=\"evenodd\" />\n            </svg>\n          </span>\n          Not enought details to generate payslip\n        </div>\n        </div>\n      }\n      </>\n    )\n    \n       \n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}