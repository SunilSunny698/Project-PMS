{"ast":null,"code":"var _jsxFileName = \"/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/tables/EmployeeTable.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { Table } from \"./Table\";\nimport { createContext, useContext, useEffect, useMemo, useState } from \"react\";\nimport api from '../api/axiosConfig';\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EmployeeTableContext = /*#__PURE__*/createContext({\n  fetchData: async (pageNumber, pageSize, searchTerm, category) => {}\n});\nexport const useFetchDataFunction = () => {\n  _s();\n  return useContext(EmployeeTableContext);\n};\n_s(useFetchDataFunction, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const EmployeeTable = ({\n  role\n}) => {\n  _s2();\n  const [data, setData] = useState([]);\n  const [maxPages, setMaxPages] = useState(0);\n  const navigate = useNavigate();\n  const headers = {\n    Authorization: `Bearer ${localStorage.getItem(\"X-AUTH\")}`\n  };\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const errorParam = queryParams.get('error');\n  const fetchData = async (pageNumber = 0, pageSize = 3, searchTerm = '', category = '') => {\n    let url = `employee/filter?pageNumber=${pageNumber}&pageSize=${pageSize}&search=`;\n    if (searchTerm) {\n      switch (category) {\n        case \"Id\":\n          url = url + `id=${searchTerm},operation=and`;\n          break;\n        case \"Name\":\n          url = url + `firstName=*${searchTerm}*,lastName=*${searchTerm}*,operation=or`;\n          break;\n        case \"Email\":\n          url = url + `email=*${searchTerm}*,operation=and`;\n          break;\n        case \"Role\":\n          url = url + `designation=*${searchTerm}*,operation=and`;\n          break;\n        case \"All\":\n          url = url + `firstName=*${searchTerm}*,lastName=*${searchTerm}*,email=*${searchTerm}*,designation=*${searchTerm}*,operation=or`;\n          break;\n        default:\n          url = \"employee/filter\";\n      }\n    }\n    console.log(\"Url\" + url);\n    await api.get(url, {\n      headers\n    }).then(response => {\n      console.log(response.data);\n      setMaxPages(response.data.totalPages - 1);\n      setData(response.data.content);\n    }).catch(() => {\n      toast.warn('Something went wrong', {\n        position: \"top-right\",\n        autoClose: 2000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"colored\"\n      });\n    });\n  };\n  useEffect(() => {\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const deleteHandler = async row => {\n    await api.delete(`employee/${row.id}`, {\n      headers\n    }).then(() => {}).catch(() => {});\n    fetchData(0, 3);\n  };\n  const viewHandler = row => {\n    navigate(`${row.id}`);\n  };\n  const cols = useMemo(() => [{\n    header: 'Id',\n    cell: row => \"ETS00\" + row.renderValue(),\n    accessorKey: 'id'\n  }, {\n    header: 'Name',\n    cell: row => row.renderValue(),\n    accessorKey: 'name'\n  }, {\n    header: 'Email',\n    cell: row => row.renderValue(),\n    accessorKey: 'email'\n  }, {\n    header: 'Role',\n    cell: row => row.renderValue(),\n    accessorKey: 'designation'\n  }], []);\n  return /*#__PURE__*/_jsxDEV(EmployeeTableContext.Provider, {\n    value: {\n      fetchData\n    },\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      fetchHandler: fetchData,\n      maxPages: maxPages,\n      columns: cols,\n      data: data,\n      label: \"Employee\",\n      all: role === \"Employee\" ? false : true,\n      deleteHandler: deleteHandler,\n      viewHandler: viewHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this), errorParam && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 inline-flex w-1/2 items-center rounded-lg bg-red-100 px-6 py-3 -mt-7 text-base text-red-700\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            fill: \"currentColor\",\n            className: \"h-5 w-5\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              \"fill-rule\": \"evenodd\",\n              d: \"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z\",\n              \"clip-rule\": \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), \"Not enought details to generate payslip\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 7\n  }, this);\n};\n_s2(EmployeeTable, \"bHzFxXnCrNlu1RIINojcc3JzgvE=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = EmployeeTable;\nvar _c;\n$RefreshReg$(_c, \"EmployeeTable\");","map":{"version":3,"names":["Table","createContext","useContext","useEffect","useMemo","useState","api","useLocation","useNavigate","toast","jsxDEV","_jsxDEV","EmployeeTableContext","fetchData","pageNumber","pageSize","searchTerm","category","useFetchDataFunction","_s","EmployeeTable","role","_s2","data","setData","maxPages","setMaxPages","navigate","headers","Authorization","localStorage","getItem","location","queryParams","URLSearchParams","search","errorParam","get","url","console","log","then","response","totalPages","content","catch","warn","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","deleteHandler","row","delete","id","viewHandler","cols","header","cell","renderValue","accessorKey","Provider","value","children","fetchHandler","columns","label","all","fileName","_jsxFileName","lineNumber","columnNumber","className","xmlns","viewBox","fill","d","_c","$RefreshReg$"],"sources":["/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/tables/EmployeeTable.tsx"],"sourcesContent":["import { ColumnDef } from \"@tanstack/react-table\";\nimport { Table } from \"./Table\";\nimport { createContext, useContext, useEffect, useMemo, useState } from \"react\";\nimport api from '../api/axiosConfig'\nimport { Employee } from \"../types/pmsTypes\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nconst EmployeeTableContext = createContext({\n  fetchData: async (pageNumber:number, pageSize:number, searchTerm:string, category:string) => {} \n})\nexport const useFetchDataFunction = () => useContext(EmployeeTableContext)\ntype EmployeeTableProps = {\n  role:\"HR\" |\"Employee\"\n}\nexport const EmployeeTable = ({role}:EmployeeTableProps) => {\n    const [data,setData] = useState([])\n    const [maxPages, setMaxPages] = useState(0)\n    const navigate = useNavigate()\n    const headers = {          \n      Authorization:`Bearer ${localStorage.getItem(\"X-AUTH\")}`\n    }\n    const location = useLocation();\n    const queryParams = new URLSearchParams(location.search);\n    const errorParam = queryParams.get('error');\n\n    const fetchData = async (pageNumber = 0,pageSize = 3, searchTerm: string = '',category: string = '') => {\n      let url = `employee/filter?pageNumber=${pageNumber}&pageSize=${pageSize}&search=`;\n      if(searchTerm){\n        switch(category){\n            case \"Id\":\n                url = url + `id=${searchTerm},operation=and`\n                break;\n            case \"Name\":\n                url = url + `firstName=*${searchTerm}*,lastName=*${searchTerm}*,operation=or`\n                break;        \n            case \"Email\":\n                url = url + `email=*${searchTerm}*,operation=and`\n                break;\n            case \"Role\":\n                url = url + `designation=*${searchTerm}*,operation=and`\n                break;\n            case \"All\":\n                url = url + `firstName=*${searchTerm}*,lastName=*${searchTerm}*,email=*${searchTerm}*,designation=*${searchTerm}*,operation=or`\n                break;\n            default:\n                url = \"employee/filter\"\n        }\n      }\n      console.log(\"Url\"+url)\n      await api.get(url,{headers})\n        .then(response => {\n          console.log(response.data)\n          setMaxPages(response.data.totalPages-1)\n          setData(response.data.content)\n        })\n        .catch(() => {\n          toast.warn('Something went wrong', {\n            position: \"top-right\",\n            autoClose: 2000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n            theme: \"colored\",\n            });\n        })\n    }\n\n\n\n    useEffect( ()=>{\n      fetchData()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[]); \n    \n\n    const deleteHandler = async (row:any) => {\n      await api.delete(`employee/${row.id}`,{headers})\n        .then(() => {})\n        .catch(() => {})\n      fetchData(0,3)\n    }\n\n    const viewHandler = (row:any) => {\n      navigate(`${row.id}`)\n    }\n\n    const cols = useMemo<ColumnDef<Employee>[]>(\n        () => [\n          {\n            header:'Id',\n            cell: (row) => \"ETS00\"+row.renderValue(),\n            accessorKey:'id'\n          },\n          {\n            header: 'Name',\n            cell: (row) => row.renderValue(),\n            accessorKey: 'name',\n          },\n          {\n            header: 'Email',\n            cell: (row) => row.renderValue(),\n            accessorKey: 'email',\n          },\n          {\n           header: 'Role',\n           cell: (row) => row.renderValue(),\n           accessorKey: 'designation',\n         },\n        ],\n        []\n       );\n       \n    return (\n      <EmployeeTableContext.Provider value={{fetchData}}>\n        <Table fetchHandler={fetchData} maxPages={maxPages} columns={cols} data={data} label=\"Employee\" all={role===\"Employee\" ? false:true}  deleteHandler={deleteHandler} viewHandler={viewHandler}/>\n        {errorParam && \n        <div className=\"flex justify-center\">\n          <div\n          className=\"mb-3 inline-flex w-1/2 items-center rounded-lg bg-red-100 px-6 py-3 -mt-7 text-base text-red-700\"\n          role=\"alert\">\n          <span className=\"mr-2\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              fill=\"currentColor\"\n              className=\"h-5 w-5\">\n              <path\n                fill-rule=\"evenodd\"\n                d=\"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z\"\n                clip-rule=\"evenodd\" />\n            </svg>\n          </span>\n          Not enought details to generate payslip\n        </div>\n        </div>\n      }\n      </EmployeeTableContext.Provider>\n    )\n    \n       \n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}