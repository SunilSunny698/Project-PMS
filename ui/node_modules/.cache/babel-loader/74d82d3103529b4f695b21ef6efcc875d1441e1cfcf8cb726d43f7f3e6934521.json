{"ast":null,"code":"var _jsxFileName = \"/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/forms/DeductionForm.tsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport Input from '../atoms/Input';\nimport { useForm } from 'react-hook-form';\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport api from '../api/axiosConfig';\nimport { AlertBox } from '../alerts/AlertBox';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  employeeId: yup.string().required(\"Employee id is required\"),\n  pf: yup.number().required(\"Pf field is required\").typeError(\"Invalid value\"),\n  tax: yup.number().required(\"Tax field is required\").typeError(\"Invalid value\")\n});\nexport const DeductionForm = ({\n  formType,\n  row\n}) => {\n  _s();\n  var _errors$employeeId, _errors$pf, _errors$tax;\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [message, setMessage] = useState('');\n  const {\n    register,\n    formState,\n    handleSubmit\n  } = useForm({\n    defaultValues: row && {\n      employeeId: row.id,\n      anyAllowances: row.deduction ? row.deduction.providentFund : null,\n      bonus: row.deduction ? row.deduction.tax : null\n    },\n    resolver: yupResolver(schema)\n  });\n  const {\n    errors\n  } = formState;\n  const onSubmit = async data => {\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"Jwt\")}`\n    };\n    await api.post(\"/deduction\", data, {\n      headers\n    }).then(() => {\n      setSuccess(true);\n      setError(false);\n      formType ? setMessage(\"Updated successfully\") : setMessage(\"Added successfullt\");\n    }).catch(error => {\n      setError(true);\n      setSuccess(false);\n      setMessage(error.response.data.errorMessage);\n      console.log(error.response);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"p-4\",\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(AlertBox, {\n      error: error,\n      success: success,\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      type: \"text\",\n      label: \"Employee ID\",\n      register: {\n        ...register(\"employeeId\")\n      },\n      error: (_errors$employeeId = errors.employeeId) === null || _errors$employeeId === void 0 ? void 0 : _errors$employeeId.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      type: \"number\",\n      label: \"PF\",\n      register: {\n        ...register(\"pf\")\n      },\n      error: (_errors$pf = errors.pf) === null || _errors$pf === void 0 ? void 0 : _errors$pf.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      type: \"number\",\n      label: \"TAX\",\n      register: {\n        ...register(\"tax\")\n      },\n      error: (_errors$tax = errors.tax) === null || _errors$tax === void 0 ? void 0 : _errors$tax.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        \"data-modal-hide\": \"defaultModal\",\n        type: \"submit\",\n        className: \"text-white bg-primary hover:bg-ternary focus:ring-4 focus:outline-none focus:ring-primary font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-ternary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(DeductionForm, \"gf+HYAUelVHy9ubQ/IRDBrwmJCc=\", false, function () {\n  return [useForm];\n});\n_c = DeductionForm;\nvar _c;\n$RefreshReg$(_c, \"DeductionForm\");","map":{"version":3,"names":["useState","Input","useForm","yup","yupResolver","api","AlertBox","jsxDEV","_jsxDEV","schema","object","shape","employeeId","string","required","pf","number","typeError","tax","DeductionForm","formType","row","_s","_errors$employeeId","_errors$pf","_errors$tax","error","setError","success","setSuccess","message","setMessage","register","formState","handleSubmit","defaultValues","id","anyAllowances","deduction","providentFund","bonus","resolver","errors","onSubmit","data","headers","Authorization","localStorage","getItem","post","then","catch","response","errorMessage","console","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","label","_c","$RefreshReg$"],"sources":["/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/forms/DeductionForm.tsx"],"sourcesContent":["import { useState } from 'react'\nimport Input from '../atoms/Input'\nimport { useForm } from 'react-hook-form'\nimport * as yup from \"yup\"\nimport {yupResolver} from \"@hookform/resolvers/yup\"\nimport api from '../api/axiosConfig'\nimport { AlertBox } from '../alerts/AlertBox'\n\ntype AddDeductionFormTypes = {\n    employeeId:string,\n    pf: number,\n    tax: number\n}\ntype DeductionFormTypes = {\n    formType?: \"EDIT\"\n    row?:any\n}\n\nconst schema = yup.object().shape({\n    employeeId: yup.string().required(\"Employee id is required\"),\n    pf: yup.number().required(\"Pf field is required\").typeError(\"Invalid value\"),\n    tax: yup.number().required(\"Tax field is required\").typeError(\"Invalid value\"),\n})\n\n\nexport const DeductionForm = ({formType,row}:DeductionFormTypes) => {\n    const [error,setError] = useState(false)\n    const [success,setSuccess] = useState(false)\n    const [message,setMessage] =useState('')\n\n    \n    const {register, formState, handleSubmit} = useForm<AddDeductionFormTypes>\n    (\n        {\n            defaultValues: row && \n            {\n                employeeId:row.id,\n                anyAllowances: row.deduction ? row.deduction.providentFund : null,\n                bonus: row.deduction ? row.deduction.tax : null\n            },\n            resolver: yupResolver(schema)\n        }\n    )\n    const {errors} = formState\n    const onSubmit = async (data:AddDeductionFormTypes) => {\n        \n        const headers = {            \n            Authorization:`Bearer ${localStorage.getItem(\"Jwt\")}`\n        }\n        await api.post(\"/deduction\",data,{headers})\n        .then(() => {\n            setSuccess(true)\n            setError(false)\n            formType?\n                setMessage(\"Updated successfully\")\n                :\n                setMessage(\"Added successfullt\")\n        })\n        .catch(error => {\n            setError(true)\n            setSuccess(false)\n            setMessage(error.response.data.errorMessage)\n            console.log(error.response)\n        })\n    }\n  return (\n    <form className='p-4' onSubmit={handleSubmit(onSubmit)}>\n        <AlertBox error={error} success={success} message={message} />\n        <Input type='text' label='Employee ID' register={{...register(\"employeeId\")}} error={errors.employeeId?.message} />\n        <Input type='number' label='PF' register={{...register(\"pf\")}} error={errors.pf?.message}/>\n        <Input type='number' label = 'TAX' register={{...register(\"tax\")}} error={errors.tax?.message} />\n        <div className=\"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600\">\n            <input data-modal-hide=\"defaultModal\" type=\"submit\" className=\"text-white bg-primary hover:bg-ternary focus:ring-4 focus:outline-none focus:ring-primary font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-ternary\" />\n        </div>\n    </form>\n  )\n}\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,KAAK,MAAM,gBAAgB;AAClC,SAASC,OAAO,QAAQ,iBAAiB;AACzC,OAAO,KAAKC,GAAG,MAAM,KAAK;AAC1B,SAAQC,WAAW,QAAO,yBAAyB;AACnD,OAAOC,GAAG,MAAM,oBAAoB;AACpC,SAASC,QAAQ,QAAQ,oBAAoB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAY7C,MAAMC,MAAM,GAAGN,GAAG,CAACO,MAAM,CAAC,CAAC,CAACC,KAAK,CAAC;EAC9BC,UAAU,EAAET,GAAG,CAACU,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,yBAAyB,CAAC;EAC5DC,EAAE,EAAEZ,GAAG,CAACa,MAAM,CAAC,CAAC,CAACF,QAAQ,CAAC,sBAAsB,CAAC,CAACG,SAAS,CAAC,eAAe,CAAC;EAC5EC,GAAG,EAAEf,GAAG,CAACa,MAAM,CAAC,CAAC,CAACF,QAAQ,CAAC,uBAAuB,CAAC,CAACG,SAAS,CAAC,eAAe;AACjF,CAAC,CAAC;AAGF,OAAO,MAAME,aAAa,GAAGA,CAAC;EAACC,QAAQ;EAACC;AAAsB,CAAC,KAAK;EAAAC,EAAA;EAAA,IAAAC,kBAAA,EAAAC,UAAA,EAAAC,WAAA;EAChE,MAAM,CAACC,KAAK,EAACC,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACxC,MAAM,CAAC4B,OAAO,EAACC,UAAU,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EAC5C,MAAM,CAAC8B,OAAO,EAACC,UAAU,CAAC,GAAE/B,QAAQ,CAAC,EAAE,CAAC;EAGxC,MAAM;IAACgC,QAAQ;IAAEC,SAAS;IAAEC;EAAY,CAAC,GAAGhC,OAAO,CAE/C;IACIiC,aAAa,EAAEd,GAAG,IAClB;MACIT,UAAU,EAACS,GAAG,CAACe,EAAE;MACjBC,aAAa,EAAEhB,GAAG,CAACiB,SAAS,GAAGjB,GAAG,CAACiB,SAAS,CAACC,aAAa,GAAG,IAAI;MACjEC,KAAK,EAAEnB,GAAG,CAACiB,SAAS,GAAGjB,GAAG,CAACiB,SAAS,CAACpB,GAAG,GAAG;IAC/C,CAAC;IACDuB,QAAQ,EAAErC,WAAW,CAACK,MAAM;EAChC,CACJ,CAAC;EACD,MAAM;IAACiC;EAAM,CAAC,GAAGT,SAAS;EAC1B,MAAMU,QAAQ,GAAG,MAAOC,IAA0B,IAAK;IAEnD,MAAMC,OAAO,GAAG;MACZC,aAAa,EAAE,UAASC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAE;IACxD,CAAC;IACD,MAAM3C,GAAG,CAAC4C,IAAI,CAAC,YAAY,EAACL,IAAI,EAAC;MAACC;IAAO,CAAC,CAAC,CAC1CK,IAAI,CAAC,MAAM;MACRrB,UAAU,CAAC,IAAI,CAAC;MAChBF,QAAQ,CAAC,KAAK,CAAC;MACfP,QAAQ,GACJW,UAAU,CAAC,sBAAsB,CAAC,GAElCA,UAAU,CAAC,oBAAoB,CAAC;IACxC,CAAC,CAAC,CACDoB,KAAK,CAACzB,KAAK,IAAI;MACZC,QAAQ,CAAC,IAAI,CAAC;MACdE,UAAU,CAAC,KAAK,CAAC;MACjBE,UAAU,CAACL,KAAK,CAAC0B,QAAQ,CAACR,IAAI,CAACS,YAAY,CAAC;MAC5CC,OAAO,CAACC,GAAG,CAAC7B,KAAK,CAAC0B,QAAQ,CAAC;IAC/B,CAAC,CAAC;EACN,CAAC;EACH,oBACE5C,OAAA;IAAMgD,SAAS,EAAC,KAAK;IAACb,QAAQ,EAAET,YAAY,CAACS,QAAQ,CAAE;IAAAc,QAAA,gBACnDjD,OAAA,CAACF,QAAQ;MAACoB,KAAK,EAAEA,KAAM;MAACE,OAAO,EAAEA,OAAQ;MAACE,OAAO,EAAEA;IAAQ;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC9DrD,OAAA,CAACP,KAAK;MAAC6D,IAAI,EAAC,MAAM;MAACC,KAAK,EAAC,aAAa;MAAC/B,QAAQ,EAAE;QAAC,GAAGA,QAAQ,CAAC,YAAY;MAAC,CAAE;MAACN,KAAK,GAAAH,kBAAA,GAAEmB,MAAM,CAAC9B,UAAU,cAAAW,kBAAA,uBAAjBA,kBAAA,CAAmBO;IAAQ;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACnHrD,OAAA,CAACP,KAAK;MAAC6D,IAAI,EAAC,QAAQ;MAACC,KAAK,EAAC,IAAI;MAAC/B,QAAQ,EAAE;QAAC,GAAGA,QAAQ,CAAC,IAAI;MAAC,CAAE;MAACN,KAAK,GAAAF,UAAA,GAAEkB,MAAM,CAAC3B,EAAE,cAAAS,UAAA,uBAATA,UAAA,CAAWM;IAAQ;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eAC3FrD,OAAA,CAACP,KAAK;MAAC6D,IAAI,EAAC,QAAQ;MAACC,KAAK,EAAG,KAAK;MAAC/B,QAAQ,EAAE;QAAC,GAAGA,QAAQ,CAAC,KAAK;MAAC,CAAE;MAACN,KAAK,GAAAD,WAAA,GAAEiB,MAAM,CAACxB,GAAG,cAAAO,WAAA,uBAAVA,WAAA,CAAYK;IAAQ;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACjGrD,OAAA;MAAKgD,SAAS,EAAC,yFAAyF;MAAAC,QAAA,eACpGjD,OAAA;QAAO,mBAAgB,cAAc;QAACsD,IAAI,EAAC,QAAQ;QAACN,SAAS,EAAC;MAAkK;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClO,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEX,CAAC;AAAAvC,EAAA,CAnDYH,aAAa;EAAA,QAMsBjB,OAAO;AAAA;AAAA8D,EAAA,GAN1C7C,aAAa;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}