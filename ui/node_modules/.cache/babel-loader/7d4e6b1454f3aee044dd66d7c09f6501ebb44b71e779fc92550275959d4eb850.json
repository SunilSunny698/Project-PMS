{"ast":null,"code":"var _jsxFileName = \"/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/tables/EmployeeTable.tsx\",\n  _s = $RefreshSig$();\nimport { Table } from \"./Table\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport api from '../api/axiosConfig';\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const EmployeeTable = ({\n  role\n}) => {\n  _s();\n  const [data, setData] = useState([]);\n  const navigate = useNavigate();\n  const headers = {\n    Authorization: `Bearer ${localStorage.getItem(\"Jwt\")}`\n  };\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const errorParam = queryParams.get('error');\n  const fetchData = async () => {\n    await api.get(\"employee/all\", {\n      headers\n    }).then(response => {\n      console.log(response.data);\n      setData(response.data);\n    }).catch(() => {});\n  };\n  useEffect(() => {\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const deleteHandler = async row => {\n    await api.delete(`${row.id}`, {\n      headers\n    }).then(() => {}).catch(() => {});\n    fetchData();\n  };\n  const viewHandler = row => {\n    navigate(`${row.id}`);\n  };\n  const cols = useMemo(() => [{\n    header: 'Id',\n    cell: row => row.renderValue(),\n    accessorKey: 'id'\n  }, {\n    header: 'Name',\n    cell: row => row.renderValue(),\n    accessorKey: 'firstName'\n  }, {\n    header: 'Email',\n    cell: row => row.renderValue(),\n    accessorKey: 'email'\n  }, {\n    header: 'Role',\n    cell: row => row.renderValue(),\n    accessorKey: 'designation'\n  }], []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      fetchHandler: fetchData,\n      columns: cols,\n      data: data,\n      label: \"Employee\",\n      all: role === \"Employee\" ? false : true,\n      deleteHandler: deleteHandler,\n      viewHandler: viewHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this), errorParam && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 inline-flex w-1/2 items-center rounded-lg bg-red-100 px-6 py-3 -mt-7 text-base text-red-700\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            fill: \"currentColor\",\n            className: \"h-5 w-5\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              \"fill-rule\": \"evenodd\",\n              d: \"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z\",\n              \"clip-rule\": \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), \"Not enought details to generate payslip\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(EmployeeTable, \"/VnD56O7kZoU9DeXl6SFkipTuRY=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = EmployeeTable;\nvar _c;\n$RefreshReg$(_c, \"EmployeeTable\");","map":{"version":3,"names":["Table","useEffect","useMemo","useState","api","useLocation","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","EmployeeTable","role","_s","data","setData","navigate","headers","Authorization","localStorage","getItem","location","queryParams","URLSearchParams","search","errorParam","get","fetchData","then","response","console","log","catch","deleteHandler","row","delete","id","viewHandler","cols","header","cell","renderValue","accessorKey","children","fetchHandler","columns","label","all","fileName","_jsxFileName","lineNumber","columnNumber","className","xmlns","viewBox","fill","d","_c","$RefreshReg$"],"sources":["/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/tables/EmployeeTable.tsx"],"sourcesContent":["import { ColumnDef } from \"@tanstack/react-table\";\nimport { Table } from \"./Table\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport api from '../api/axiosConfig'\nimport { Employee } from \"../types/pmsTypes\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\ntype EmployeeTableProps = {\n  role:\"HR\" |\"Employee\"\n}\nexport const EmployeeTable = ({role}:EmployeeTableProps) => {\n    const [data,setData] = useState([])\n    const navigate = useNavigate()\n    const headers = {          \n      Authorization:`Bearer ${localStorage.getItem(\"Jwt\")}`\n    }\n    const location = useLocation();\n    const queryParams = new URLSearchParams(location.search);\n    const errorParam = queryParams.get('error');\n\n    const fetchData = async () => {\n      await api.get(\"employee/all\",{headers})\n      .then(response => {\n        console.log(response.data)\n        setData(response.data)\n      })\n      .catch(() => {})\n    }\n\n    useEffect( ()=>{\n      fetchData()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[]); \n    \n\n    const deleteHandler = async (row:any) => {\n      await api.delete(`${row.id}`,{headers})\n        .then(() => {})\n        .catch(() => {})\n      fetchData()\n    }\n\n    const viewHandler = (row:any) => {\n      navigate(`${row.id}`)\n    }\n\n    const cols = useMemo<ColumnDef<Employee>[]>(\n        () => [\n          {\n            header:'Id',\n            cell: (row) => row.renderValue(),\n            accessorKey:'id'\n          },\n          {\n            header: 'Name',\n            cell: (row) => row.renderValue(),\n            accessorKey: 'firstName',\n          },\n          {\n            header: 'Email',\n            cell: (row) => row.renderValue(),\n            accessorKey: 'email',\n          },\n          {\n           header: 'Role',\n           cell: (row) => row.renderValue(),\n           accessorKey: 'designation',\n         },\n        ],\n        []\n       );\n       \n    return (\n      <>\n      \n        <Table fetchHandler={fetchData} columns={cols} data={data} label=\"Employee\" all={role===\"Employee\" ? false:true}  deleteHandler={deleteHandler} viewHandler={viewHandler}/>\n        {errorParam && \n        <div className=\"flex justify-center\">\n          <div\n          className=\"mb-3 inline-flex w-1/2 items-center rounded-lg bg-red-100 px-6 py-3 -mt-7 text-base text-red-700\"\n          role=\"alert\">\n          <span className=\"mr-2\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              fill=\"currentColor\"\n              className=\"h-5 w-5\">\n              <path\n                fill-rule=\"evenodd\"\n                d=\"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z\"\n                clip-rule=\"evenodd\" />\n            </svg>\n          </span>\n          Not enought details to generate payslip\n        </div>\n        </div>\n      }\n      </>\n    )\n    \n       \n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}