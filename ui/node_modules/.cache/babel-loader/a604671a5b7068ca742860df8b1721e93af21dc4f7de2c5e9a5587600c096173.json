{"ast":null,"code":"var _jsxFileName = \"/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/forms/EarningForm.tsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport Input from '../atoms/Input';\nimport { useForm } from 'react-hook-form';\nimport * as yup from \"yup\";\nimport api from '../api/axiosConfig';\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { AlertBox } from '../alerts/AlertBox';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  employeeId: yup.string().required(\"Employee id is required\"),\n  anyAllowances: yup.number().typeError(\"Invalid value\").required(\"Allowances field is required\"),\n  bonus: yup.number().required(\"Bonus field is required\").typeError(\"Invalid value\")\n});\nexport const EarningForm = ({\n  formType,\n  row\n}) => {\n  _s();\n  var _errors$employeeId, _errors$anyAllowances, _errors$bonus;\n  console.log(row && row);\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [message, setMessage] = useState('');\n  const {\n    register,\n    formState,\n    handleSubmit\n  } = useForm({\n    defaultValues: {\n      employeeId: row.id,\n      anyAllowances: row.earning ? row.earning.anyAllowances : null,\n      bonus: row.earning ? row.earning.bonus : null\n    },\n    resolver: yupResolver(schema)\n  });\n  const {\n    errors\n  } = formState;\n  const onSubmit = async data => {\n    const headers = {\n      Authorization: `Bearer ${localStorage.getItem(\"Jwt\")}`\n    };\n    await api.post(\"/earning\", data, {\n      headers\n    }).then(() => {\n      setSuccess(true);\n      setError(false);\n      formType ? setMessage(\"Updated successfully\") : setMessage(\"Added successfullt\");\n    }).catch(error => {\n      setError(true);\n      setSuccess(false);\n      setMessage(error.response.data.errorMessage);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"p-4\",\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(AlertBox, {\n      error: error,\n      success: success,\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      type: \"text\",\n      label: \"Employee ID\",\n      register: {\n        ...register(\"employeeId\")\n      },\n      error: (_errors$employeeId = errors.employeeId) === null || _errors$employeeId === void 0 ? void 0 : _errors$employeeId.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      type: \"number\",\n      label: \"Allowances\",\n      register: {\n        ...register(\"anyAllowances\")\n      },\n      error: (_errors$anyAllowances = errors.anyAllowances) === null || _errors$anyAllowances === void 0 ? void 0 : _errors$anyAllowances.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      type: \"number\",\n      label: \"Bonus\",\n      register: {\n        ...register(\"bonus\")\n      },\n      error: (_errors$bonus = errors.bonus) === null || _errors$bonus === void 0 ? void 0 : _errors$bonus.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        \"data-modal-hide\": \"defaultModal\",\n        type: \"submit\",\n        className: \"text-white bg-primary hover:bg-ternary focus:ring-4 focus:outline-none focus:ring-primary font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-ternary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(EarningForm, \"gf+HYAUelVHy9ubQ/IRDBrwmJCc=\", false, function () {\n  return [useForm];\n});\n_c = EarningForm;\nvar _c;\n$RefreshReg$(_c, \"EarningForm\");","map":{"version":3,"names":["useState","Input","useForm","yup","api","yupResolver","AlertBox","jsxDEV","_jsxDEV","schema","object","shape","employeeId","string","required","anyAllowances","number","typeError","bonus","EarningForm","formType","row","_s","_errors$employeeId","_errors$anyAllowances","_errors$bonus","console","log","error","setError","success","setSuccess","message","setMessage","register","formState","handleSubmit","defaultValues","id","earning","resolver","errors","onSubmit","data","headers","Authorization","localStorage","getItem","post","then","catch","response","errorMessage","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","label","_c","$RefreshReg$"],"sources":["/Users/Gembali/Documents/GitHub Space/Project-PMS/ui/src/components/forms/EarningForm.tsx"],"sourcesContent":["import { useState } from 'react'\nimport Input from '../atoms/Input'\nimport { useForm } from 'react-hook-form'\nimport * as yup from \"yup\"\nimport api from '../api/axiosConfig'\nimport {yupResolver} from \"@hookform/resolvers/yup\"\nimport { AlertBox } from '../alerts/AlertBox'\n\ntype AddEarningsFormTypes = {\n    employeeId:string,\n    anyAllowances: number,\n    bonus: number\n}\ntype EarningFormTypes = {\n    formType?: \"EDIT\"\n    row?:any\n}\nconst schema = yup.object().shape({\n    employeeId: yup.string().required(\"Employee id is required\"),\n    anyAllowances: yup.number().typeError(\"Invalid value\").required(\"Allowances field is required\"),\n    bonus: yup.number().required(\"Bonus field is required\").typeError(\"Invalid value\")\n})\nexport const EarningForm = ({formType,row}:EarningFormTypes) => {\n    console.log(row&&row)\n    const [error,setError] = useState(false)\n    const [success,setSuccess] = useState(false)\n    const [message,setMessage] =useState('')\n    \n\n    const {register, formState, handleSubmit} = useForm<AddEarningsFormTypes>\n    (\n        {\n            defaultValues:{\n                employeeId:row.id,\n                anyAllowances: row.earning? row.earning.anyAllowances:null,\n                bonus: row.earning? row.earning.bonus: null\n            },\n            resolver: yupResolver(schema)\n        }\n    )\n    const {errors} = formState\n    \n    const onSubmit = async (data:AddEarningsFormTypes) => {\n        const headers = {            \n            Authorization:`Bearer ${localStorage.getItem(\"Jwt\")}`\n        }\n        await api.post(\"/earning\",data,{headers})\n        .then(() => {\n            setSuccess(true)\n            setError(false)\n            formType?\n                setMessage(\"Updated successfully\")\n                :\n                setMessage(\"Added successfullt\")\n        })\n        .catch(error => {\n            setError(true)\n            setSuccess(false)\n            setMessage(error.response.data.errorMessage)\n        })\n    }\n    return (\n        <form className='p-4' onSubmit={handleSubmit(onSubmit)}>\n            <AlertBox error={error} success={success} message={message} />\n            <Input type='text' label='Employee ID' register={{...register(\"employeeId\")}} error={errors.employeeId?.message} />\n            <Input type='number' label='Allowances' register={{...register(\"anyAllowances\")}} error={errors.anyAllowances?.message}/>\n            <Input type='number' label = 'Bonus' register={{...register(\"bonus\")}} error={errors.bonus?.message} />\n            <div className=\"flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600\">\n                <input data-modal-hide=\"defaultModal\" type=\"submit\" className=\"text-white bg-primary hover:bg-ternary focus:ring-4 focus:outline-none focus:ring-primary font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-ternary\" />\n            </div>\n        </form>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}